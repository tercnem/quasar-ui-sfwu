"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("quasar"),M=require("pinia"),e=require("vue"),E=require("vue-router"),T=require("vue-i18n"),Y=function(a,t){if(a!=null&&a.length>=10){const l=new Date(a);return i.date.formatDate(l,"DD-MM-YYYY")}else return""},De=function(a,t){if(a!=null&&a.length>=7){const l=new Date(a);return i.date.formatDate(l,"MM-YYYY")}else return""},F=function(a,t){if(a!=null&&a.length>=10){const l=new Date(a);return i.date.formatDate(l,"DD-MM-YYYY HH:mm:ss")}else return""},fe=function(a,t){if(a!=null&&a.length>=10){const l=new Date(a);return i.date.formatDate(l,t)}else return""},_e=function(a){const t=a.split("-");return t[2]+"-"+t[1]+"-"+t[0]},ve=function(){const a=new Date;return i.date.formatDate(a,"YYYY-MM-DD HH:mm:ss")},ge=function(){const a=new Date;return i.date.formatDate(a,"YYYY-MM-DD")},we=function(){const a=new Date,t=new Date(a.getFullYear(),a.getMonth(),1);return i.date.formatDate(t,"YYYY-MM-DD")},he=function(){const a=new Date,t=new Date(a.getFullYear(),a.getMonth()+1,0);return i.date.formatDate(t,"YYYY-MM-DD")},I=M.defineStore("userData",{state:()=>({cookiesExpire:"24h",isLoggedIn:!1,displayName:"",role:"",verified:!1,emailVerified:!0,user:{}}),getters:{},actions:{}}),B=M.defineStore("notification",{state:()=>({}),getters:{},actions:{success(o){if(Array.isArray(o))for(const a in o)this.Notify.create({position:"top-right",type:"positive",color:"positive",textColor:"white",icon:"check_circle",message:o[a],closeBtn:"x"});else{const a=o==""||o==null?"Success":o;this.Notify.create({position:"top-right",type:"positive",color:"positive",textColor:"white",icon:"check_circle",message:a,closeBtn:"x"})}},warning(o){if(Array.isArray(o))for(const a in o)this.Notify.create({position:"top-right",type:"warning",color:"warning",textColor:"white",icon:"warning",message:o[a],closeBtn:"x"});else{const a=o==""||o==null?"Error":o;this.Notify.create({position:"top-right",type:"warning",color:"warning",textColor:"white",icon:"warning",message:a,closeBtn:"x"})}},error(o){if(Array.isArray(o))for(const a in o)this.Notify.create({position:"top-right",type:"negative",color:"negative",textColor:"white",icon:"error",message:o[a],closeBtn:"x"});else{const a=o==""||o==null?"Error":o;this.Notify.create({position:"top-right",type:"negative",color:"negative",textColor:"white",icon:"error",message:a,closeBtn:"x"})}}}}),A=M.defineStore("sfapi",{state:()=>({}),getters:{},actions:{async call({param:o,apiName:a,header:t={},showErrorNotification:l=!0,flgJsonAsContentType:d=!0,flgLoading:u=!1}){var N,_,v,p,g,f,n,c,V,q,C,s;const b=B();u&&i.Loading.show();try{const r=new FormData,h={headers:Object.assign({},{Authorization:i.Cookies.has("token")?"Bearer "+i.Cookies.get("token"):"","Content-Language":i.Cookies.has("lang")?i.Cookies.get("lang"):"en"},t)};for(const y in o)o.hasOwnProperty(y)&&(Array.isArray(o[y])?r.append(y,JSON.stringify(o[y])):r.append(y,o[y]));const m=await this.api.post(a,d?JSON.stringify(o):r,h);return!m.data.success&&l&&(typeof((_=(N=m==null?void 0:m.data)==null?void 0:N.data)==null?void 0:_.msglist)=="object"&&((p=(v=m==null?void 0:m.data)==null?void 0:v.data)==null?void 0:p.msglist)!==null&&!Array.isArray((f=(g=m==null?void 0:m.data)==null?void 0:g.data)==null?void 0:f.msglist)?b.warning("error validation"):(c=(n=m==null?void 0:m.data)==null?void 0:n.data)!=null&&c.msglist?b.warning((q=(V=m==null?void 0:m.data)==null?void 0:V.data)==null?void 0:q.msglist):b.warning((s=(C=m==null?void 0:m.data)==null?void 0:C.data)==null?void 0:s.msg)),m.data.error=!1,m.data}catch(r){return await this.handleError(r,!0),{error:!0,success:!1,error_data:r}}finally{u&&i.Loading.hide()}},async postmultipart({param:o,apiName:a,header:t={},showErrorNotification:l=!0,flgLoading:d=!0}){return t["Content-Type"]="multipart/form-data",await this.call({param:o,apiName:a,header:t,showErrorNotification:l,flgJsonAsContentType:!1,flgLoading:d})},async add({param:o,apiName:a,header:t={},showErrorNotification:l=!0}){return await this.call({param:o,apiName:a,header:t,showErrorNotification:l,flgLoading:!0})},async edit({param:o,apiName:a,header:t={},showErrorNotification:l=!0}){return await this.call({param:o,apiName:a,header:t,showErrorNotification:l,flgLoading:!0})},async delete({param:o,apiName:a,header:t={},showErrorNotification:l=!0}){return await this.call({param:o,apiName:a,header:t,showErrorNotification:l,flgLoading:!0})},async get({param:o,apiName:a,loading:t=!0,header:l={},showErrorNotification:d=!0}){return await this.call({param:o,apiName:a,header:l,showErrorNotification:d,flgLoading:t})},async getlist({param:o,apiName:a,loading:t=!1,header:l={},showErrorNotification:d=!0}){return await this.call({param:o,apiName:a,header:l,showErrorNotification:d,flgLoading:t})},async count({param:o,apiName:a,loading:t=!1,header:l={},showErrorNotification:d=!0}){return await this.call({param:o,apiName:a,header:l,showErrorNotification:d,flgLoading:t})},async download({param:o,apiName:a,header:t={},loading:l=!1,showErrorNotification:d=!0,flgJsonAsContentType:u=!0}){var N,_,v,p,g,f;const b=B();try{l&&i.Loading.show();const n=new FormData,V={headers:Object.assign({},{Authorization:i.Cookies.has("token")?"Bearer "+i.Cookies.get("token"):"","Content-Language":i.Cookies.has("lang")?i.Cookies.get("lang"):"en"},t),responseType:"blob"};for(const w in o)o.hasOwnProperty(w)&&(Array.isArray(o[w])?n.append(w,JSON.stringify(o[w])):n.append(w,o[w]));let q=await this.api.post(a,u?JSON.stringify(o):n,V);if(l&&i.Loading.hide(),((N=q==null?void 0:q.data)==null?void 0:N.type)=="application/json"){const w=await((_=q==null?void 0:q.data)==null?void 0:_.text());let h=JSON.parse(w);return h.success?h:((v=h==null?void 0:h.data)!=null&&v.msglist?b.warning((p=h==null?void 0:h.data)==null?void 0:p.msglist):b.warning((g=h==null?void 0:h.data)==null?void 0:g.msg),{error:!0,success:!1})}const C=window.URL.createObjectURL(new Blob([q.data]),{type:q.headers["content-type"]}),s=document.createElement("a");s.href=C;const r=(f=q.headers["content-disposition"])==null?void 0:f.split("filename=")[1];s.setAttribute("download",r||"download"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(C)}catch(n){return await this.handleError(n,d),{error:!0,success:!1,error_data:n}}},async handleError(o,a){var d,u,b,N,_,v,p,g;const t=I(),l=B();if(o.response!=null){if(o.response.status==401){a&&l.error("Session Expired"),t.isLoggedIn=!1,i.LocalStorage.set("permissions",[]),t.displayName="",t.role="",i.Cookies.remove("token",{sameSite:"Strict",secure:!0,path:"/"}),i.Cookies.remove("role",{sameSite:"Strict",secure:!0,path:"/"}),this.router.replace("/login");return}if(o.response.status==419){a&&l.error("Session Expired"),t.isLoggedIn=!1,i.LocalStorage.set("permissions",[]),t.displayName="",t.role="",i.Cookies.remove("token",{sameSite:"Strict",secure:!0,path:"/"}),i.Cookies.remove("role",{sameSite:"Strict",secure:!0,path:"/"}),window.location.reload();return}if(((u=(d=o==null?void 0:o.response)==null?void 0:d.data)==null?void 0:u.errorKey)==900){this.router.replace("/emailNotVerified");return}if((_=(N=(b=o==null?void 0:o.response)==null?void 0:b.data)==null?void 0:N.data)!=null&&_.msg){a&&l.error((g=(p=(v=o==null?void 0:o.response)==null?void 0:v.data)==null?void 0:p.data)==null?void 0:g.msg);return}}else{a&&l.error(o==null?void 0:o.message);return}}}}),be=M.defineStore("auth",{state:()=>({}),getters:{},actions:{async login(o,a="/dashboard"){const t=A(),l=I();i.Loading.show();let d=await t.call({param:o,apiName:"login"});return i.Loading.hide(),d.success&&(l.isLoggedIn=!0,l.displayName=d.data.user.name,l.role=d.data.user.role_name,l.user=d.data.user,i.LocalStorage.set("user",d.data.user),i.LocalStorage.set("permissions",d.data.user.permissions),i.LocalStorage.set("isLoggedIn",!0),i.LocalStorage.set("displayName",d.data.user.name),i.LocalStorage.set("role",d.data.user.role_name),i.Cookies.set("role",d.data.user.role_name,{expires:l.cookiesExpire,sameSite:"Strict",secure:!0,path:"/"}),i.Cookies.set("token",d.data.token,{expires:this.cookiesExpire,sameSite:"Strict",secure:!0,path:"/"}),this.router.push(a)),d.success},async logout(o,a="/"){const t=A(),l=I(),d=B();i.Loading.show();let u=await t.call({param:o,apiName:"auth/logout"});return i.Loading.hide(),u.success&&(l.isLoggedIn=!1,i.LocalStorage.set("permissions",[]),l.displayName="",l.role="",i.Cookies.remove("token",{sameSite:"Strict",secure:!0,path:"/"}),i.Cookies.remove("role",{sameSite:"Strict",secure:!0,path:"/"}),d.success("success"),this.router.push(a)),u.success},async isTokenValid(){const o=A(),a=I(),t=B();let l=await o.call({param:{},apiName:"auth/isTokenValid",showErrorNotification:!1});l.success?(a.isLoggedIn=!0,a.displayName=l.data.user.name,a.role=l.data.user.role_name,a.user=l.data.user,i.LocalStorage.set("user",l.data.user),i.LocalStorage.set("permissions",l.data.user.permissions),i.LocalStorage.set("isLoggedIn",!0),i.LocalStorage.set("displayName",l.data.user.name),i.LocalStorage.set("role",l.data.user.role_name),i.Cookies.set("role",l.data.user.role_name,{expires:"24h",sameSite:"Strict",secure:!0,path:"/"})):navigator.onLine?(a.user=i.LocalStorage.getItem("user"),a.isLoggedIn=i.LocalStorage.getItem("isLoggedIn"),a.displayName=i.LocalStorage.getItem("displayName"),a.role=i.LocalStorage.getItem("role")):t.error("DEVICE OFFLINE")}}}),ye=M.defineStore("roleAndPermission",{state:()=>({}),getters:{},actions:{async addPermissionToRole(o){const a=A(),t=B();let l=await a.add({param:o,apiName:"roleAndPermission/addPermissionToRole"});return l.success&&t.showSuccess("success"),l},async deleteRole(o){const a=A(),t=B();let l=await a.delete({param:o,apiName:"roleAndPermission/deleteRole"});return l.success&&t.showSuccess("success"),l},async changeRole(o){const a=A(),t=B();let l=await a.edit({param:o,apiName:"roleAndPermission/changeRole"});return l.success&&t.showSuccess("success"),l},async deletePermissionOfRoleRole(o){const a=A(),t=B();let l=await a.delete({param:o,apiName:"roleAndPermission/deletePermissionOfRoleRole"});return l.success&&t.showSuccess("success"),l},async getRoleList(o){return await A().getlist({param:o,apiName:"roleAndPermission/getRoleList",loading:!1})},async countGetRoleList(o){return await A().get({param:o,apiName:"roleAndPermission/countGetRoleList",loading:!1})},async getAvailablePermissionListForRole(o){return await A().getlist({param:o,apiName:"roleAndPermission/getAvailablePermissionListForRole",loading:!1})},async countGetAvailablePermissionListForRole(o){return await wsapiStore().get({param:o,apiName:"roleAndPermission/countGetAvailablePermissionListForRole",loading:!1})},async getPermissionOfRoleList(o){return await A().getlist({param:o,apiName:"roleAndPermission/getPermissionOfRoleList",loading:!1})}}}),Ve=function(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a)},Ne=function(a){const t=i.LocalStorage.getItem("permissions");if(Array.isArray(a)&&Array.isArray(t)){let l=a.some((d,u,b)=>t.includes(d));return l=l||a.includes("ALL")||a.length==0,i.Cookies.get("role")=="SUPERADMIN"||l}else return!1},Ce={action:"Action",add:"Add",add_role:"Add Role",are_you_sure:"Are you sure ?",are_you_sure_delete:"Are you sure delete ?",bahasa:"Bahasa",cancel:"Cancel",change_profile:"Change Profile",change_role:"Change Role",confirm_password:"Confirm Password",delete:"Delete",edit_user:"Edit User",email:"Email",english:"English",keyword:"Keyword",login:"Login",name:"Name",new_password:"New Password",no:"No",old_password:"Old Password",password:"Password",permission_group:"Permission Group",permission_name:"Permission Name",permission_of_role:"Permission of Role",please_choose_permission:"Please Choose Permission",profile:"Profile",role:"Role",role_name:"Role Name",role_of_user:"Role of User",user:"User",username:"Username",user_role:"User Role",user_vs_role:"User VS Role",yes:"Yes"},qe={action:"Aksi",add:"Tambah",add_role:"Tambah Role",are_you_sure:"Apakah anda yakin ?",are_you_sure_delete:"Apakah anda yakin hapus ?",bahasa:"Bahasa",cancel:"Batalkan",change_profile:"Ubah Profile",change_role:"Ubah Role",confirm_password:"Konfirmasi Password",delete:"Hapus",edit_user:"Sunting User",email:"Email",english:"English",keyword:"kata kunci",login:"Login",name:"Nama",new_password:"Password Baru",no:"No",old_password:"Password Lama",password:"Password",permission_group:"Permission Group",permission_name:"Nama Permission",permission_of_role:"Permission of Role",please_choose_permission:"Mohon Pilih Permission",profile:"Profile",role:"Role",role_name:"Nama Role",role_of_user:"Role of User",user:"User",username:"Username",user_role:"User Role",user_vs_role:"User VS Role",yes:"Ya"},ke={class:"row col"},$e={key:0,class:"text-negative"},Re={class:"self-center full-width no-outline",tabindex:"0"},xe={class:"row items-center justify-end"},j={__name:"SfDatePicker",props:{readonly:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!1,default:null},errorMessage:{type:String,required:!1,default:null},modelValue:{type:String,required:!0},label:{type:String,default:""},hint:{type:String,default:""},required:{type:Boolean,default:null}},emits:["update:modelValue"],setup(o,{emit:a}){const t=o,l=a,d=e.ref(),u=e.ref(t.modelValue);e.ref(t.label),e.ref(t.hint),e.watch(()=>t.modelValue,(_,v)=>{u.value=_});function b(_){d.value.hide(),l("update:modelValue",_)}function N(){d.value.hide(),l("update:modelValue","")}return(_,v)=>{const p=e.resolveComponent("q-icon"),g=e.resolveComponent("q-btn"),f=e.resolveComponent("q-date"),n=e.resolveComponent("q-popup-proxy"),c=e.resolveComponent("q-field"),V=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(c,{"label-slot":"","stack-label":"",outlined:"","bottom-slots":t.hint!=null&&t.hint!="",readonly:t.readonly,error:t.error,"error-message":t.errorMessage},{append:e.withCtx(()=>[e.createVNode(p,{name:"event"})]),label:e.withCtx(()=>[e.createElementVNode("div",ke,[e.createTextVNode(e.toDisplayString(t.label)+" ",1),t.required?(e.openBlock(),e.createElementBlock("div",$e,"*")):e.createCommentVNode("",!0)])]),control:e.withCtx(()=>[e.createElementVNode("div",Re,e.toDisplayString(e.unref(Y)(u.value)),1)]),hint:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(t.hint),1)]),default:e.withCtx(()=>[e.createVNode(n,{"no-parent-event":t.readonly,ref_key:"dateProxy",ref:d,"transition-show":"scale","transition-hide":"scale"},{default:e.withCtx(()=>[e.createVNode(f,{modelValue:u.value,"onUpdate:modelValue":[v[1]||(v[1]=q=>u.value=q),b],mask:"YYYY-MM-DD"},{default:e.withCtx(()=>[e.createElementVNode("div",xe,[e.withDirectives(e.createVNode(g,{label:_.$t("clear"),color:"primary",flat:"",onClick:v[0]||(v[0]=q=>N())},null,8,["label"]),[[V]]),e.withDirectives(e.createVNode(g,{label:_.$t("close"),color:"primary",flat:""},null,8,["label"]),[[V]])])]),_:1},8,["modelValue"])]),_:1},8,["no-parent-event"])]),_:1},8,["bottom-slots","readonly","error","error-message"])}}},Ee={class:"row col"},Ue={key:0,class:"text-negative"},Ae={class:"self-center full-width no-outline",tabindex:"0"},Be={class:"text-red"},Le={class:"row items-center justify-end"},Oe={class:"row items-center justify-end"},H={__name:"SfDatetimePicker",props:{readOnly:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!1,default:null},errorMessage:{type:String,required:!1,default:""},modelValue:{type:String,required:!0},label:{type:String,default:""},hint:{type:String,default:""},required:{type:Boolean,default:null}},emits:["update:modelValue"],setup(o,{emit:a}){const t=o,l=a,d=e.ref(),u=e.ref(),b=e.ref(t.modelValue);e.ref(t.label);const N=e.ref(t.hint);e.ref(!0),e.watch(()=>t.modelValue,(g,f)=>{b.value=g});function _(g){d.value.hide(),u.value.show()}function v(){l("update:modelValue",""),d.value.hide()}function p(g,f){l("update:modelValue",g)}return(g,f)=>{const n=e.resolveComponent("q-icon"),c=e.resolveComponent("q-btn"),V=e.resolveComponent("q-date"),q=e.resolveComponent("q-popup-proxy"),C=e.resolveComponent("q-time"),s=e.resolveComponent("q-field"),r=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(s,{"label-slot":"","stack-label":"",outlined:"","bottom-slots":N.value!=null&&N.value!="",readonly:t.readOnly,error:t.error,"error-message":t.errorMessage},{append:e.withCtx(()=>[e.createVNode(n,{name:"event"})]),label:e.withCtx(()=>[e.createElementVNode("div",Ee,[e.createTextVNode(e.toDisplayString(t.label)+" ",1),t.required?(e.openBlock(),e.createElementBlock("div",Ue,"*")):e.createCommentVNode("",!0)])]),control:e.withCtx(()=>[e.createElementVNode("div",Ae,e.toDisplayString(e.unref(F)(b.value)),1)]),hint:e.withCtx(()=>[e.createElementVNode("div",Be,e.toDisplayString(N.value),1)]),default:e.withCtx(()=>[e.createVNode(q,{"no-parent-event":t.readOnly,ref_key:"dateProxy",ref:d,"transition-show":"scale","transition-hide":"scale"},{default:e.withCtx(()=>[e.createVNode(V,{modelValue:b.value,"onUpdate:modelValue":[f[1]||(f[1]=w=>b.value=w),_],mask:"YYYY-MM-DD HH:mm:ss","no-unset":""},{default:e.withCtx(()=>[e.createElementVNode("div",Le,[e.withDirectives(e.createVNode(c,{label:g.$t("clear"),color:"primary",flat:"",onClick:f[0]||(f[0]=w=>v())},null,8,["label"]),[[r]]),e.withDirectives(e.createVNode(c,{label:g.$t("close"),color:"primary",flat:""},null,8,["label"]),[[r]])])]),_:1},8,["modelValue"])]),_:1},8,["no-parent-event"]),e.createVNode(q,{ref_key:"timeProxy",ref:u,"transition-show":"scale","transition-hide":"scale"},{default:e.withCtx(()=>[e.createVNode(C,{modelValue:b.value,"onUpdate:modelValue":[f[2]||(f[2]=w=>b.value=w),p],format24h:"",mask:"YYYY-MM-DD HH:mm:ss","with-seconds":"",color:"primary"},{default:e.withCtx(()=>[e.createElementVNode("div",Oe,[e.withDirectives(e.createVNode(c,{label:g.$t("close"),color:"primary",flat:""},null,8,["label"]),[[r]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1},8,["bottom-slots","readonly","error","error-message"])}}},Te={class:"row col"},Ie={key:0,class:"text-negative"},Me={class:"self-center full-width no-outline",tabindex:"0"},Ye={class:"text-red"},Fe={class:"row items-center justify-end"},Q={__name:"SfMonthPicker",props:{readOnly:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!1,default:null},errorMessage:{type:String,required:!1,default:""},modelValue:{type:String,required:!0},label:{type:String,default:""},hint:{type:String,default:""},required:{type:Boolean,default:null}},emits:["update:modelValue"],setup(o,{emit:a}){const t=o,l=a,d=e.ref(),u=e.ref(t.modelValue);e.ref(t.label);const b=e.ref(t.hint);e.watch(()=>t.modelValue,(_,v)=>{u.value=_});function N(_){d.value.hide(),l("update:modelValue",_)}return(_,v)=>{const p=e.resolveComponent("q-icon"),g=e.resolveComponent("q-btn"),f=e.resolveComponent("q-date"),n=e.resolveComponent("q-popup-proxy"),c=e.resolveComponent("q-field"),V=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(c,{"label-slot":"","stack-label":"",outlined:"","bottom-slots":b.value!=null&&b.value!="",readonly:t.readOnly,error:t.error,"error-message":t.errorMessage},{append:e.withCtx(()=>[e.createVNode(p,{name:"event"})]),label:e.withCtx(()=>[e.createElementVNode("div",Te,[e.createTextVNode(e.toDisplayString(t.label)+" ",1),t.required?(e.openBlock(),e.createElementBlock("div",Ie,"*")):e.createCommentVNode("",!0)])]),control:e.withCtx(()=>[e.createElementVNode("div",Me,e.toDisplayString(e.unref(De)(u.value)),1)]),hint:e.withCtx(()=>[e.createElementVNode("div",Ye,e.toDisplayString(b.value),1)]),default:e.withCtx(()=>[e.createVNode(n,{"no-parent-event":t.readOnly,ref_key:"dateProxy",ref:d,"transition-show":"scale","transition-hide":"scale"},{default:e.withCtx(()=>[e.createVNode(f,{modelValue:u.value,"onUpdate:modelValue":[v[0]||(v[0]=q=>u.value=q),N],mask:"YYYY-MM",color:"primary",title:"",minimal:"","years-in-month-view":!0,"default-view":"Months","emit-immediately":!0},{default:e.withCtx(()=>[e.createElementVNode("div",Fe,[e.withDirectives(e.createVNode(g,{label:_.$t("close"),color:"primary",flat:""},null,8,["label"]),[[V]])])]),_:1},8,["modelValue"])]),_:1},8,["no-parent-event"])]),_:1},8,["bottom-slots","readonly","error","error-message"])}}},je={class:"row col"},He={key:0,class:"text-negative"},Qe={class:"self-center full-width no-outline",tabindex:"0"},ze={class:"row items-center justify-end"},z={__name:"SfTimePicker",props:{readOnly:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!1,default:null},errorMessage:{type:String,required:!1,default:""},modelValue:{type:String,required:!0},label:{type:String,default:""},required:{type:Boolean,default:null}},emits:["update:modelValue"],setup(o,{emit:a}){const t=o,l=a;e.ref();const d=e.ref(),u=e.ref(t.modelValue);e.ref(t.label),e.watch(()=>t.modelValue,(_,v)=>{u.value=_});function b(_){l("update:modelValue",_)}function N(){d.value.hide(),l("update:modelValue","")}return(_,v)=>{const p=e.resolveComponent("q-icon"),g=e.resolveComponent("q-btn"),f=e.resolveComponent("q-time"),n=e.resolveComponent("q-popup-proxy"),c=e.resolveComponent("q-field"),V=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(c,{"label-slot":"","stack-label":"",outlined:"",readonly:t.readOnly,error:t.error,"error-message":t.errorMessage},{append:e.withCtx(()=>[e.createVNode(p,{name:"access_time"})]),label:e.withCtx(()=>[e.createElementVNode("div",je,[e.createTextVNode(e.toDisplayString(t.label)+" ",1),t.required?(e.openBlock(),e.createElementBlock("div",He,"*")):e.createCommentVNode("",!0)])]),control:e.withCtx(()=>[e.createElementVNode("div",Qe,e.toDisplayString(u.value),1)]),default:e.withCtx(()=>[e.createVNode(n,{"no-parent-event":t.readOnly,"transition-show":"scale","transition-hide":"scale",ref_key:"timePickerProxy",ref:d},{default:e.withCtx(()=>[e.createVNode(f,{modelValue:u.value,"onUpdate:modelValue":[v[0]||(v[0]=q=>u.value=q),v[1]||(v[1]=q=>b(u.value))],format24h:"",color:"primary"},{default:e.withCtx(()=>[e.createElementVNode("div",ze,[e.withDirectives(e.createVNode(g,{onClick:N,label:_.$t("clear"),color:"primary",flat:""},null,8,["label"]),[[V]]),e.withDirectives(e.createVNode(g,{label:_.$t("close"),color:"primary",flat:""},null,8,["label"]),[[V]])])]),_:1},8,["modelValue"])]),_:1},8,["no-parent-event"])]),_:1},8,["readonly","error","error-message"])}}},Ke={class:"text-h6"},Ge={class:"row"},Je={class:"col"},We={class:"row"},Xe={class:"col"},Ze={class:"row"},eo={class:"col"},oo={class:"row"},to={class:"col"},ao={class:"row"},lo={class:"col"},K={__name:"SfAddUserDlg",props:{modelValue:{type:Boolean,required:!1}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,l=a,{dialogRef:d,onDialogHide:u,onDialogOK:b,onDialogCancel:N}=i.useDialogPluginComponent();i.useQuasar(),E.useRoute(),E.useRouter(),T.useI18n();const _=A();I();const v=B();e.ref(t.flgDialog);const p=e.ref({username:"",name:"",email:"",password:"",confirmPassword:""});async function g(){(await _.call({param:p.value,apiName:"user/addUser",loading:!0,showErrorNotification:!0})).success&&(l("ok"),b(),v.success("Success"))}return e.watch(()=>{},(f,n)=>{}),e.onMounted(()=>{}),(f,n)=>{const c=e.resolveComponent("q-space"),V=e.resolveComponent("q-dialog"),q=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(V,{ref_key:"dialogRef",ref:d,onHide:e.unref(u),persistent:""},{default:e.withCtx(()=>[e.createVNode(e.unref(i.QCard),null,{default:e.withCtx(()=>[e.createVNode(e.unref(i.QCardSection),{class:"row items-center q-pb-none"},{default:e.withCtx(()=>[e.createElementVNode("div",Ke,e.toDisplayString(f.$t("add_user")),1),e.createVNode(c),e.withDirectives(e.createVNode(e.unref(i.QBtn),{icon:"close",flat:"",round:"",dense:""},null,512),[[q]])]),_:1}),e.createVNode(e.unref(i.QCardSection),{class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",Ge,[e.createElementVNode("div",Je,[e.createVNode(e.unref(i.QInput),{outlined:"",label:f.$t("username"),modelValue:p.value.username,"onUpdate:modelValue":n[0]||(n[0]=C=>p.value.username=C)},null,8,["label","modelValue"])])]),e.createElementVNode("div",We,[e.createElementVNode("div",Xe,[e.createVNode(e.unref(i.QInput),{outlined:"",label:f.$t("name"),modelValue:p.value.name,"onUpdate:modelValue":n[1]||(n[1]=C=>p.value.name=C)},null,8,["label","modelValue"])])]),e.createElementVNode("div",Ze,[e.createElementVNode("div",eo,[e.createVNode(e.unref(i.QInput),{outlined:"",label:f.$t("email"),modelValue:p.value.email,"onUpdate:modelValue":n[2]||(n[2]=C=>p.value.email=C),autocomplete:"off"},null,8,["label","modelValue"])])]),e.createElementVNode("div",oo,[e.createElementVNode("div",to,[e.createVNode(e.unref(i.QInput),{outlined:"",label:f.$t("password"),modelValue:p.value.password,"onUpdate:modelValue":n[3]||(n[3]=C=>p.value.password=C),type:"password",autocomplete:"off"},null,8,["label","modelValue"])])]),e.createElementVNode("div",ao,[e.createElementVNode("div",lo,[e.createVNode(e.unref(i.QInput),{outlined:"",label:f.$t("confirm_password"),modelValue:p.value.confirmPassword,"onUpdate:modelValue":n[4]||(n[4]=C=>p.value.confirmPassword=C),type:"password"},null,8,["label","modelValue"])])])]),_:1}),e.createVNode(e.unref(i.QCardActions),null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(e.unref(i.QBtn),{label:f.$t("cancel"),color:"warning"},null,8,["label"]),[[q]]),e.createVNode(e.unref(i.QBtn),{label:f.$t("add"),color:"primary",onClick:n[5]||(n[5]=C=>g())},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["onHide"])}}},no={class:"text-h6 text-center"},so={class:"row"},ro={class:"col"},io={class:"row"},co={class:"col"},uo={class:"row"},mo={class:"col"},po={class:"row"},fo={class:"col"},_o={class:"row"},vo={class:"col"},go={class:"row"},wo={class:"col"},G={__name:"SfEditUserDlg",props:{user:{type:Object,required:!1}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,l=a,{dialogRef:d,onDialogHide:u,onDialogOK:b,onDialogCancel:N}=i.useDialogPluginComponent(),_=i.useQuasar();E.useRoute(),E.useRouter(),T.useI18n();const v=A(),p=I(),g=B(),f=e.ref("profile");e.ref(20),e.ref(t.user);const n=e.ref({});n.value.width=_.screen.sizes.md+"px";const c=e.ref({username:"",name:"",email:"",oldPassword:"",newPassword:"",confirmPassword:""});async function V(){i.Loading.show();const s=await v.call({param:{name:c.value.name},apiName:"user/editUser",loading:!0,showErrorNotification:!0});i.Loading.hide(),s.success&&(p.displayName=s.data.name,l("ok"),b(),g.success("Success"))}async function q(){i.Loading.show();const s=await v.call({param:{old_password:c.value.oldPassword,new_password:c.value.newPassword,confirm_password:c.value.confirmPassword},apiName:"user/changePassword",loading:!0,showErrorNotification:!0});i.Loading.hide(),s.success&&(l("ok"),b(),g.success("Success"))}async function C(){const s=await v.call({param:{},apiName:"user/findCurrentUser",loading:!0,showErrorNotification:!0});s.success&&(c.value.username=s.data.username,c.value.name=s.data.name,c.value.email=s.data.email)}return e.watch(()=>{},(s,r)=>{}),e.onMounted(()=>{C()}),(s,r)=>{const w=e.resolveComponent("q-space"),h=e.resolveComponent("q-btn"),m=e.resolveComponent("q-card-section"),y=e.resolveComponent("q-separator"),S=e.resolveComponent("q-tab"),k=e.resolveComponent("q-tabs"),U=e.resolveComponent("q-input"),D=e.resolveComponent("q-tab-panel"),P=e.resolveComponent("q-tab-panels"),x=e.resolveComponent("q-card-actions"),R=e.resolveComponent("q-card"),O=e.resolveComponent("q-dialog"),L=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(O,{ref_key:"dialogRef",ref:d,onHide:e.unref(u),persistent:""},{default:e.withCtx(()=>[e.createVNode(R,{style:e.normalizeStyle(n.value)},{default:e.withCtx(()=>[e.createVNode(m,{class:"row items-center"},{default:e.withCtx(()=>[e.createVNode(w),e.createElementVNode("div",no,e.toDisplayString(s.$t("profile")),1),e.createVNode(w),e.withDirectives(e.createVNode(h,{icon:"close",flat:"",round:"",dense:""},null,512),[[L]])]),_:1}),e.createVNode(y),e.createVNode(k,{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=$=>f.value=$),dense:"","left-icon":"","active-color":"white","indicator-color":"primary","active-class":"bg-primary"},{default:e.withCtx(()=>[e.createVNode(S,{name:"profile",icon:"fa-regular fa-user",label:s.$t("profile")},null,8,["label"]),e.createVNode(S,{name:"password",icon:"fa-solid fa-lock",label:s.$t("password")},null,8,["label"])]),_:1},8,["modelValue"]),e.createVNode(y),e.createVNode(P,{modelValue:f.value,"onUpdate:modelValue":r[7]||(r[7]=$=>f.value=$),animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:e.withCtx(()=>[e.createVNode(D,{name:"profile",class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",so,[e.createElementVNode("div",ro,[e.createVNode(U,{outlined:"",label:s.$t("username"),modelValue:c.value.username,"onUpdate:modelValue":r[1]||(r[1]=$=>c.value.username=$),readonly:""},null,8,["label","modelValue"])])]),e.createElementVNode("div",io,[e.createElementVNode("div",co,[e.createVNode(U,{outlined:"",label:s.$t("email"),modelValue:c.value.email,"onUpdate:modelValue":r[2]||(r[2]=$=>c.value.email=$),readonly:""},null,8,["label","modelValue"])])]),e.createElementVNode("div",uo,[e.createElementVNode("div",mo,[e.createVNode(U,{outlined:"",label:s.$t("name"),modelValue:c.value.name,"onUpdate:modelValue":r[3]||(r[3]=$=>c.value.name=$)},null,8,["label","modelValue"])])])]),_:1}),e.createVNode(D,{name:"password",class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",po,[e.createElementVNode("div",fo,[e.createVNode(U,{outlined:"",label:s.$t("old_password"),modelValue:c.value.oldPassword,"onUpdate:modelValue":r[4]||(r[4]=$=>c.value.oldPassword=$),type:"password"},null,8,["label","modelValue"])])]),e.createElementVNode("div",_o,[e.createElementVNode("div",vo,[e.createVNode(U,{outlined:"",label:s.$t("new_password"),modelValue:c.value.newPassword,"onUpdate:modelValue":r[5]||(r[5]=$=>c.value.newPassword=$),type:"password"},null,8,["label","modelValue"])])]),e.createElementVNode("div",go,[e.createElementVNode("div",wo,[e.createVNode(U,{outlined:"",label:s.$t("confirm_password"),modelValue:c.value.confirmPassword,"onUpdate:modelValue":r[6]||(r[6]=$=>c.value.confirmPassword=$),type:"password"},null,8,["label","modelValue"])])])]),_:1})]),_:1},8,["modelValue"]),e.createVNode(x,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(h,{label:s.$t("cancel"),color:"warning"},null,8,["label"]),[[L]]),f.value=="password"?(e.openBlock(),e.createBlock(h,{key:0,label:s.$t("save"),color:"primary",onClick:r[8]||(r[8]=$=>q())},null,8,["label"])):e.createCommentVNode("",!0),f.value=="profile"?(e.openBlock(),e.createBlock(h,{key:1,label:s.$t("save"),color:"primary",onClick:r[9]||(r[9]=$=>V())},null,8,["label"])):e.createCommentVNode("",!0)]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"])}}},ho={class:"row"},bo={class:"col"},yo={class:"row"},Vo={class:"col"},No={class:"row"},Co={class:"col"},qo={class:"row"},So={class:"col"},Po={class:"row"},Do={class:"col"},ko={class:"row"},$o={class:"col"},Ro={class:"row"},xo={class:"col"},J={__name:"SfEditUserForAdminDlg",props:{user:{type:Object,required:!0}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,l=a,{dialogRef:d,onDialogHide:u,onDialogOK:b,onDialogCancel:N}=i.useDialogPluginComponent(),_=i.useQuasar();E.useRoute(),E.useRouter(),T.useI18n();const v=A();I();const p=B(),g=e.ref("profile");e.ref(20);const f=e.ref(t.user),n=e.ref({});n.value.width=_.screen.sizes.md+"px";const c=e.ref({username:"",name:"",email:"",password:"",confirmPassword:"",newPassword:""});async function V(){i.Loading.show();const s=await v.call({param:{name:c.value.name,user_id:f.value.user_id,active:c.value.active},apiName:"user/editUserForAdmin",loading:!0,showErrorNotification:!0});i.Loading.hide(),s.success&&(l("ok"),b(),p.success("Success"))}async function q(){i.Loading.show();const s=await v.call({param:{new_password:c.value.newPassword,confirm_password:c.value.confirmPassword,user_id:f.value.user_id},apiName:"user/changePasswordForAdmin",loading:!0,showErrorNotification:!0});i.Loading.hide(),s.success&&(l("ok"),b(),p.success("Success"))}async function C(){var s;if((s=f.value)!=null&&s.user_id){const r=await v.call({param:{user_id:f.value.user_id},apiName:"user/findUserById",loading:!0,showErrorNotification:!0});r.success&&(c.value.username=r.data.username,c.value.name=r.data.name,c.value.email=r.data.email,c.value.active=r.data.active)}}return e.watch(()=>{},(s,r)=>{}),e.onMounted(()=>{C()}),(s,r)=>{const w=e.resolveComponent("q-card-section"),h=e.resolveComponent("q-separator"),m=e.resolveComponent("q-tab"),y=e.resolveComponent("q-tabs"),S=e.resolveComponent("q-input"),k=e.resolveComponent("q-btn-toggle"),U=e.resolveComponent("q-tab-panel"),D=e.resolveComponent("q-tab-panels"),P=e.resolveComponent("q-btn"),x=e.resolveComponent("q-card-actions"),R=e.resolveComponent("q-card"),O=e.resolveComponent("q-dialog"),L=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(O,{ref_key:"dialogRef",ref:d,onHide:e.unref(u),persistent:""},{default:e.withCtx(()=>[e.createVNode(R,{style:e.normalizeStyle(n.value)},{default:e.withCtx(()=>[e.createVNode(w,{class:"text-h5 text-weight-medium text-center"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.$t("edit_user")),1)]),_:1}),e.createVNode(h),e.createVNode(y,{modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=$=>g.value=$),dense:"","left-icon":"","active-color":"white","indicator-color":"primary","active-class":"bg-primary"},{default:e.withCtx(()=>[e.createVNode(m,{name:"profile",icon:"fa-regular fa-user",label:s.$t("profile")},null,8,["label"]),e.createVNode(m,{name:"password",icon:"fa-solid fa-lock",label:s.$t("password")},null,8,["label"])]),_:1},8,["modelValue"]),e.createVNode(h),e.createVNode(D,{modelValue:g.value,"onUpdate:modelValue":r[7]||(r[7]=$=>g.value=$),animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:e.withCtx(()=>[e.createVNode(U,{name:"profile",class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",ho,[e.createElementVNode("div",bo,[e.createVNode(S,{outlined:"",label:s.$t("username"),modelValue:c.value.username,"onUpdate:modelValue":r[1]||(r[1]=$=>c.value.username=$),readonly:""},null,8,["label","modelValue"])])]),e.createElementVNode("div",yo,[e.createElementVNode("div",Vo,[e.createVNode(S,{outlined:"",label:s.$t("email"),modelValue:c.value.email,"onUpdate:modelValue":r[2]||(r[2]=$=>c.value.email=$),readonly:""},null,8,["label","modelValue"])])]),e.createElementVNode("div",No,[e.createElementVNode("div",Co,[e.createVNode(S,{outlined:"",label:s.$t("name"),modelValue:c.value.name,"onUpdate:modelValue":r[3]||(r[3]=$=>c.value.name=$)},null,8,["label","modelValue"])])]),e.createElementVNode("div",qo,[e.createElementVNode("div",So,e.toDisplayString(s.$t("active")),1)]),e.createElementVNode("div",Po,[e.createElementVNode("div",Do,[e.createVNode(k,{class:"bordered",unelevated:"",modelValue:c.value.active,"onUpdate:modelValue":r[4]||(r[4]=$=>c.value.active=$),"toggle-color":"primary",options:[{label:s.$t("yes"),value:"Y"},{label:s.$t("no"),value:"N"}]},null,8,["modelValue","options"])])])]),_:1}),e.createVNode(U,{name:"password",class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",ko,[e.createElementVNode("div",$o,[e.createVNode(S,{outlined:"",label:s.$t("new_password"),modelValue:c.value.newPassword,"onUpdate:modelValue":r[5]||(r[5]=$=>c.value.newPassword=$),type:"password"},null,8,["label","modelValue"])])]),e.createElementVNode("div",Ro,[e.createElementVNode("div",xo,[e.createVNode(S,{outlined:"",label:s.$t("confirm_password"),modelValue:c.value.confirmPassword,"onUpdate:modelValue":r[6]||(r[6]=$=>c.value.confirmPassword=$),type:"password"},null,8,["label","modelValue"])])])]),_:1})]),_:1},8,["modelValue"]),e.createVNode(x,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(P,{label:s.$t("cancel"),color:"warning"},null,8,["label"]),[[L]]),g.value=="password"?(e.openBlock(),e.createBlock(P,{key:0,label:s.$t("save"),color:"primary",onClick:r[8]||(r[8]=$=>q())},null,8,["label"])):e.createCommentVNode("",!0),g.value=="profile"?(e.openBlock(),e.createBlock(P,{key:1,label:s.$t("save"),color:"primary",onClick:r[9]||(r[9]=$=>V())},null,8,["label"])):e.createCommentVNode("",!0)]),_:1})]),_:1},8,["style"])]),_:1},8,["onHide"])}}},Eo={class:"row q-pa-sm"},Uo={class:"col"},Ao={class:"row q-pb-sm q-gutter-sm"},Bo={class:"column"},Lo={class:"column"},Oo={class:"row"},To={class:"col"},W={__name:"SfUserPage",setup(o){const a=i.useQuasar();E.useRoute(),E.useRouter(),T.useI18n(),e.ref({});const t=e.ref();function l(){a.dialog({component:"SfAddUserDlg"}).onOk(()=>{t.value.refresh()})}return e.watch(()=>{},(d,u)=>{}),e.onMounted(()=>{}),(d,u)=>{const b=e.resolveComponent("q-btn"),N=e.resolveComponent("sf-user-table"),_=e.resolveComponent("q-card-section"),v=e.resolveComponent("q-card"),p=e.resolveComponent("q-page");return e.openBlock(),e.createBlock(p,null,{default:e.withCtx(()=>[e.createElementVNode("div",Eo,[e.createElementVNode("div",Uo,[e.createVNode(v,null,{default:e.withCtx(()=>[e.createVNode(_,null,{default:e.withCtx(()=>[e.createElementVNode("div",Ao,[e.createElementVNode("div",Bo,[e.createVNode(b,{label:d.$t("search"),color:"primary",onClick:u[0]||(u[0]=g=>t.value.refresh())},null,8,["label"])]),e.createElementVNode("div",Lo,[e.createVNode(b,{label:d.$t("add"),color:"positive",onClick:u[1]||(u[1]=g=>l())},null,8,["label"])])]),e.createElementVNode("div",Oo,[e.createElementVNode("div",To,[e.createVNode(N,{ref_key:"tableRef",ref:t},null,512)])])]),_:1})]),_:1})])])]),_:1})}}},X={__name:"SfUserTable",emits:[],setup(o,{expose:a,emit:t}){const l=t,d=i.useQuasar(),{t:u}=T.useI18n();E.useRoute(),E.useRouter();const b=A();B();const N=e.ref(!1),_=e.ref([]),v=e.ref([{name:"index",align:"center",label:"#",field:"index"},{name:"username",align:"left",label:u("username"),field:"username",sortable:!0},{name:"name",align:"left",label:u("name"),field:"name"},{name:"email",align:"left",label:u("email"),field:"email"},{name:"login_session",align:"left",label:u("login_session"),field:"login_session"},{name:"active",align:"left",label:u("active"),field:"active"},{name:"action",align:"center",label:u("action"),field:"action",sortable:!1}]),p=e.ref([]),g=e.ref({keyword:"",active:"ALL"}),f=e.ref({});e.ref(!1),e.ref();const n=e.ref({sortBy:"username",descending:!1,page:1,rowsPerPage:10,rowsNumber:0});async function c(s){var x,R;const{page:r,rowsPerPage:w,sortBy:h,descending:m}=s.pagination,y=s.filter;N.value=!0;const S=w==0?n.value.rowsNumber:w,k=(r-1)*w,D=Object.assign({},{limit:S,offset:k,order_by:h,order_by_type:m?"DESC":"ASC"},y),P=await b.call({param:D,apiName:"user/getUserList",loading:!1,showErrorNotification:!0});P.success&&(n.value.rowsNumber=P.data.total_rows,_.value.splice(0,_.value.length,...P.data.datalist)),N.value=!1,n.value.page=r,n.value.rowsPerPage=w,!((x=P==null?void 0:P.data)!=null&&x.total_rows)&&((R=P==null?void 0:P.data)==null?void 0:R.total_rows)==0&&(n.value.rowsPerPage=10),n.value.sortBy=h,n.value.descending=m}function V(s){d.dialog({componentProps:{data:{username:s.username},msg:u("are_you_sure_logout_this_user")},component:"SfYesNoDlg"}).onOk(()=>{console.log("anu"),console.log("anu :")}).hide()}function q(s){f.value=s,d.dialog({component:"SfEditUserForAdminDlg",componentProps:{user:s}}).onOk(()=>C())}function C(){c({pagination:n.value,filter:g.value})}return e.watch(()=>p.value,(s,r)=>{l("update:selected",s[0]==null?{}:s[0])}),e.onMounted(()=>{C()}),a({refresh:C}),(s,r)=>{const w=e.resolveComponent("q-icon"),h=e.resolveComponent("q-input"),m=e.resolveComponent("q-td"),y=e.resolveComponent("q-item"),S=e.resolveComponent("q-separator"),k=e.resolveComponent("q-list"),U=e.resolveComponent("q-menu"),D=e.resolveComponent("q-btn"),P=e.resolveComponent("q-table"),x=e.resolveDirective("ripple");return e.openBlock(),e.createBlock(P,{title:s.$t("user"),bordered:"",rows:_.value,columns:v.value,"row-key":R=>R.user_id,"wrap-cells":!0,pagination:n.value,"onUpdate:pagination":r[1]||(r[1]=R=>n.value=R),loading:N.value,filter:g.value,"virtual-scroll":"",separator:"horizontal",selection:"single",selected:p.value,"onUpdate:selected":r[2]||(r[2]=R=>p.value=R),onRequest:c},{"top-right":e.withCtx(()=>[e.createVNode(h,{dense:"",outlined:"",debounce:"300",modelValue:g.value.keyword,"onUpdate:modelValue":r[0]||(r[0]=R=>g.value.keyword=R),placeholder:s.$t("keyword")},{append:e.withCtx(()=>[e.createVNode(w,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-index":e.withCtx(R=>[e.createVNode(m,{props:R},{default:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(R.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":e.withCtx(R=>[e.createVNode(m,{props:R},{default:e.withCtx(()=>[e.createVNode(D,{label:s.$t("action"),size:"sm",color:"primary"},{default:e.withCtx(()=>[e.createVNode(U,{bordered:""},{default:e.withCtx(()=>[e.createVNode(k,null,{default:e.withCtx(()=>[e.withDirectives((e.openBlock(),e.createBlock(y,{clickable:"",onClick:O=>q(R.row)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.$t("edit")),1)]),_:2},1032,["onClick"])),[[x]]),e.createVNode(S),e.withDirectives((e.openBlock(),e.createBlock(y,{clickable:"",onClick:O=>V(R.row)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.$t("logout")),1)]),_:2},1032,["onClick"])),[[x]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"])]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","row-key","pagination","loading","filter","selected"])}}},Z={__name:"SfUserForUserRoleTable",props:{selected:{type:Object,required:!0}},emits:[],setup(o,{emit:a}){const t=a;i.useQuasar();const{t:l}=T.useI18n();E.useRoute(),E.useRouter();const d=A();B();const u=e.ref(!1),b=e.ref([]),N=e.ref([{name:"index",align:"center",label:"#",field:"index"},{name:"username",align:"left",label:l("username"),field:"username"},{name:"name",align:"left",label:l("name"),field:"name"},{name:"email",align:"left",label:l("email"),field:"email"}]),_=e.ref([]),v=e.ref({keyword:"",active:"ALL"});e.ref({}),e.ref(!1),e.ref(!1),e.ref();const p=e.ref({sortBy:"username",descending:!1,page:1,rowsPerPage:10,rowsNumber:0});async function g(n){var S,k;const{page:c,rowsPerPage:V,sortBy:q,descending:C}=n.pagination,s=n.filter;u.value=!0;const r=V==0?p.value.rowsNumber:V,w=(c-1)*V,m=Object.assign({},{limit:r,offset:w,order_by:q,order_by_type:C?"DESC":"ASC"},s),y=await d.call({param:m,apiName:"user/getUserList",loading:!1,showErrorNotification:!0});y.success&&(p.value.rowsNumber=y.data.total_rows,b.value.splice(0,b.value.length,...y.data.datalist)),u.value=!1,p.value.page=c,p.value.rowsPerPage=V,!((S=y==null?void 0:y.data)!=null&&S.total_rows)&&((k=y==null?void 0:y.data)==null?void 0:k.total_rows)==0&&(p.value.rowsPerPage=10),p.value.sortBy=q,p.value.descending=C}e.watch(()=>_.value,(n,c)=>{t("update:selected",n[0]==null?{}:n[0])}),e.onMounted(()=>{f()});function f(){g({pagination:p.value,filter:v.value})}return(n,c)=>{const V=e.resolveComponent("q-icon"),q=e.resolveComponent("q-input"),C=e.resolveComponent("q-td"),s=e.resolveComponent("q-table");return e.openBlock(),e.createBlock(s,{title:n.$t("user"),bordered:"",rows:b.value,columns:N.value,"row-key":r=>r.user_id,"wrap-cells":!0,pagination:p.value,"onUpdate:pagination":c[1]||(c[1]=r=>p.value=r),loading:u.value,filter:v.value,"virtual-scroll":"",separator:"horizontal",selection:"single",selected:_.value,"onUpdate:selected":c[2]||(c[2]=r=>_.value=r),onRequest:g},{"top-right":e.withCtx(()=>[e.createVNode(q,{dense:"",outlined:"",debounce:"300",modelValue:v.value.keyword,"onUpdate:modelValue":c[0]||(c[0]=r=>v.value.keyword=r),placeholder:n.$t("keyword")},{append:e.withCtx(()=>[e.createVNode(V,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-index":e.withCtx(r=>[e.createVNode(C,{props:r},{default:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(r.rowIndex+1),1)]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","row-key","pagination","loading","filter","selected"])}}},ee={__name:"SfAvailableRoleListCombo",props:{modelValue:{type:Object}},emits:["update:modelValue","onChangeRole"],setup(o,{emit:a}){const t=o,l=a,d=A(),u=e.ref([]),b=e.ref(t.modelValue);async function N(){var v;const _=await d.call({param:{active:"Y"},apiName:"roleAndPermission/getAvailableRoleListForCombo",loading:!1,showErrorNotification:!1});if(_.success){u.value=_.data;let p=_.data.find(g=>g.flg_current_role=="Y");b.value=p??(_.data.length>0?(v=_.data)==null?void 0:v[0]:{})}else u.value=[]}return e.watch(()=>b.value,async(_,v)=>{l("update:modelValue",_)}),e.onMounted(()=>{N()}),(_,v)=>{const p=e.resolveComponent("q-item-section"),g=e.resolveComponent("q-item"),f=e.resolveComponent("q-select");return e.openBlock(),e.createBlock(f,{dense:"",class:"bg-grey-2",outlined:"",modelValue:b.value,"onUpdate:modelValue":v[0]||(v[0]=n=>b.value=n),"input-debounce":"300",label:_.$t("role"),options:u.value,"option-label":n=>Object(n)===n&&"role_name"in n?n.role_name:null,"option-value":n=>Object(n)===n&&"role_id"in n?n.role_id:-99},{"no-option":e.withCtx(()=>[e.createVNode(g,null,{default:e.withCtx(()=>[e.createVNode(p,{class:"text-grey"},{default:e.withCtx(()=>[e.createTextVNode("No results")]),_:1})]),_:1})]),_:1},8,["modelValue","label","options","option-label","option-value"])}}},Io={class:"text-h6"},Mo={class:"row"},Yo={class:"col"},oe={__name:"SfAddRoleDlg",props:{modelValue:{type:Boolean,required:!1}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,l=a,{dialogRef:d,onDialogHide:u,onDialogOK:b,onDialogCancel:N}=i.useDialogPluginComponent();i.useQuasar(),E.useRoute(),E.useRouter(),T.useI18n();const _=A();I();const v=B();e.ref(t.flgDialog);const p=e.ref({role_name:""});async function g(){(await _.add({param:p.value,apiName:"roleAndPermission/addRole"})).success&&(l("ok"),b(),v.success("Success"))}return e.watch(()=>{},(f,n)=>{}),e.onMounted(()=>{}),(f,n)=>{const c=e.resolveComponent("q-space"),V=e.resolveComponent("q-btn"),q=e.resolveComponent("q-card-section"),C=e.resolveComponent("q-input"),s=e.resolveComponent("q-card-actions"),r=e.resolveComponent("q-card"),w=e.resolveComponent("q-dialog"),h=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(w,{ref_key:"dialogRef",ref:d,onHide:e.unref(u),persistent:""},{default:e.withCtx(()=>[e.createVNode(r,null,{default:e.withCtx(()=>[e.createVNode(q,{class:"row items-center q-pb-none"},{default:e.withCtx(()=>[e.createElementVNode("div",Io,e.toDisplayString(f.$t("add_role")),1),e.createVNode(c),e.withDirectives(e.createVNode(V,{icon:"close",flat:"",round:"",dense:""},null,512),[[h]])]),_:1}),e.createVNode(q,{class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",Mo,[e.createElementVNode("div",Yo,[e.createVNode(C,{outlined:"",label:f.$t("role_name"),modelValue:p.value.role_name,"onUpdate:modelValue":n[0]||(n[0]=m=>p.value.role_name=m)},null,8,["label","modelValue"])])])]),_:1}),e.createVNode(s,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(V,{label:f.$t("cancel"),color:"warning"},null,8,["label"]),[[h]]),e.createVNode(V,{label:f.$t("add"),color:"primary",onClick:n[1]||(n[1]=m=>g())},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["onHide"])}}},Fo={class:"text-h6"},jo={class:"row"},Ho={class:"col"},te={__name:"SfAvailablePermissionForRoleDlg",props:{role:{type:Object,required:!0}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,{dialogRef:l,onDialogHide:d,onDialogOK:u,onDialogCancel:b}=i.useDialogPluginComponent();i.useQuasar(),E.useRoute(),E.useRouter(),T.useI18n(),A(),I(),B();const N=e.ref(t.role);return e.watch(()=>{},(_,v)=>{}),e.onMounted(()=>{}),(_,v)=>{const p=e.resolveComponent("q-space"),g=e.resolveComponent("q-btn"),f=e.resolveComponent("q-card-section"),n=e.resolveComponent("SfAvailablePermissionForRoleTable"),c=e.resolveComponent("q-card-actions"),V=e.resolveComponent("q-card"),q=e.resolveComponent("q-dialog"),C=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(q,{ref_key:"dialogRef",ref:l,onHide:e.unref(d),persistent:""},{default:e.withCtx(()=>[e.createVNode(V,null,{default:e.withCtx(()=>[e.createVNode(f,{class:"row items-center q-pb-none"},{default:e.withCtx(()=>[e.createElementVNode("div",Fo,e.toDisplayString(_.$t("available_permission")),1),e.createVNode(p),e.withDirectives(e.createVNode(g,{icon:"close",flat:"",round:"",dense:""},null,512),[[C]])]),_:1}),e.createVNode(f,{class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",jo,[e.createElementVNode("div",Ho,[e.createVNode(n,{role:N.value,onSuccess:v[0]||(v[0]=s=>e.unref(u)())},null,8,["role"])])])]),_:1}),e.createVNode(c,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(g,{label:_.$t("cancel"),color:"warning"},null,8,["label"]),[[C]])]),_:1})]),_:1})]),_:1},8,["onHide"])}}},Qo={class:"text-h6"},zo={class:"row"},Ko={class:"col"},ae={__name:"SfAvailableRoleForUserRoleDlg",props:{user:{type:Object,required:!0}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,{dialogRef:l,onDialogHide:d,onDialogOK:u,onDialogCancel:b}=i.useDialogPluginComponent();i.useQuasar(),E.useRoute(),E.useRouter(),T.useI18n(),A(),I(),B();const N=e.ref(t.user);return e.watch(()=>{},(_,v)=>{}),e.onMounted(()=>{}),(_,v)=>{const p=e.resolveComponent("q-space"),g=e.resolveComponent("q-btn"),f=e.resolveComponent("q-card-section"),n=e.resolveComponent("SfAvailableRoleForUserRoleTable"),c=e.resolveComponent("q-card-actions"),V=e.resolveComponent("q-card"),q=e.resolveComponent("q-dialog"),C=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(q,{ref_key:"dialogRef",ref:l,onHide:e.unref(d),persistent:""},{default:e.withCtx(()=>[e.createVNode(V,null,{default:e.withCtx(()=>[e.createVNode(f,{class:"row items-center q-pb-none"},{default:e.withCtx(()=>[e.createElementVNode("div",Qo,e.toDisplayString(_.$t("available_role")),1),e.createVNode(p),e.withDirectives(e.createVNode(g,{icon:"close",flat:"",round:"",dense:""},null,512),[[C]])]),_:1}),e.createVNode(f,{class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",zo,[e.createElementVNode("div",Ko,[e.createVNode(n,{user:N.value,onSuccess:v[0]||(v[0]=s=>e.unref(u)())},null,8,["user"])])])]),_:1}),e.createVNode(c,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(g,{label:_.$t("cancel"),color:"warning"},null,8,["label"]),[[C]])]),_:1})]),_:1})]),_:1},8,["onHide"])}}},Go={class:"text-h6"},Jo={class:"row"},Wo={class:"col"},le={__name:"SfChangeRoleDlg",props:{modelValue:{type:Boolean,required:!1}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,{dialogRef:l,onDialogHide:d,onDialogOK:u,onDialogCancel:b}=i.useDialogPluginComponent(),N=i.useQuasar();E.useRoute(),E.useRouter(),T.useI18n();const _=A(),v=I(),p=B();e.ref(t.flgDialog);const g=e.ref({});e.ref({role_name:""});async function f(){const n=await _.call({param:{role_id:g.value.role_id},apiName:"roleAndPermission/changeRole",loading:!0,showErrorNotification:!0});n.success&&(v.role=n.data.user.role_name,N.localStorage.set("permissions",n.data.user.permissions),N.cookies.set("role",n.data.user.role_name,{expires:v.cookiesExpire,sameSite:"Strict",secure:!0,path:"/"}),u(),p.showSuccess("Success"))}return e.watch(()=>{},(n,c)=>{}),e.onMounted(()=>{}),(n,c)=>{const V=e.resolveComponent("q-space"),q=e.resolveComponent("q-btn"),C=e.resolveComponent("q-card-section"),s=e.resolveComponent("sf-available-role-list-combo"),r=e.resolveComponent("q-card-actions"),w=e.resolveComponent("q-card"),h=e.resolveComponent("q-dialog"),m=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(h,{ref_key:"dialogRef",ref:l,onHide:e.unref(d),persistent:""},{default:e.withCtx(()=>[e.createVNode(w,null,{default:e.withCtx(()=>[e.createVNode(C,{class:"row items-center q-pb-none"},{default:e.withCtx(()=>[e.createElementVNode("div",Go,e.toDisplayString(n.$t("change_role")),1),e.createVNode(V),e.withDirectives(e.createVNode(q,{icon:"close",flat:"",round:"",dense:""},null,512),[[m]])]),_:1}),e.createVNode(C,{class:"q-gutter-sm"},{default:e.withCtx(()=>[e.createElementVNode("div",Jo,[e.createElementVNode("div",Wo,[e.createVNode(s,{modelValue:g.value,"onUpdate:modelValue":c[0]||(c[0]=y=>g.value=y)},null,8,["modelValue"])])])]),_:1}),e.createVNode(r,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(q,{label:n.$t("cancel"),color:"warning"},null,8,["label"]),[[m]]),e.createVNode(q,{label:n.$t("yes"),color:"primary",onClick:c[1]||(c[1]=y=>f())},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["onHide"])}}},Xo={class:"row"},Zo={class:"col-6 q-pa-sm"},et={class:"row"},ot={class:"col text-center text-h5 text-weight-medium"},tt={class:"row"},at={class:"col"},lt={class:"col-6 q-pa-sm"},nt={class:"row"},st={class:"col text-center text-h5 text-weight-medium"},rt={class:"row"},it={class:"col"},ne={__name:"SfRolePage",setup(o){i.useQuasar(),E.useRoute(),E.useRouter(),T.useI18n();const a=e.ref({});return e.watch(()=>{},(t,l)=>{}),e.onMounted(()=>{}),(t,l)=>{const d=e.resolveComponent("sf-role-table"),u=e.resolveComponent("sf-permission-of-role-table"),b=e.resolveComponent("q-page");return e.openBlock(),e.createBlock(b,null,{default:e.withCtx(()=>[e.createElementVNode("div",Xo,[e.createElementVNode("div",Zo,[e.createElementVNode("div",et,[e.createElementVNode("div",ot,e.toDisplayString(t.$t("role")),1)]),e.createElementVNode("div",tt,[e.createElementVNode("div",at,[e.createVNode(d,{selected:a.value,"onUpdate:selected":l[0]||(l[0]=N=>a.value=N)},null,8,["selected"])])])]),e.createElementVNode("div",lt,[e.createElementVNode("div",nt,[e.createElementVNode("div",st,e.toDisplayString(t.$t("permission_of_role")),1)]),e.createElementVNode("div",rt,[e.createElementVNode("div",it,[e.createVNode(u,{role:a.value,"onUpdate:role":l[1]||(l[1]=N=>a.value=N)},null,8,["role"])])])])])]),_:1})}}},ct={class:"row"},dt={class:"col-6 q-pa-sm"},ut={class:"row"},mt={class:"col text-center text-h5 text-weight-medium"},pt={class:"row"},ft={class:"col"},_t={class:"col-6 q-pa-sm"},vt={class:"row"},gt={class:"col text-center text-h5 text-weight-medium"},wt={class:"row"},ht={class:"col"},se={__name:"SfUserVsRolePage",setup(o){i.useQuasar(),E.useRoute(),E.useRouter(),T.useI18n();const a=e.ref({});return e.watch(()=>{},(t,l)=>{}),e.onMounted(()=>{}),(t,l)=>{const d=e.resolveComponent("sf-user-for-user-role-table"),u=e.resolveComponent("sf-user-role-table"),b=e.resolveComponent("q-page");return e.openBlock(),e.createBlock(b,null,{default:e.withCtx(()=>[e.createElementVNode("div",ct,[e.createElementVNode("div",dt,[e.createElementVNode("div",ut,[e.createElementVNode("div",mt,e.toDisplayString(t.$t("user")),1)]),e.createElementVNode("div",pt,[e.createElementVNode("div",ft,[e.createVNode(d,{selected:a.value,"onUpdate:selected":l[0]||(l[0]=N=>a.value=N)},null,8,["selected"])])])]),e.createElementVNode("div",_t,[e.createElementVNode("div",vt,[e.createElementVNode("div",gt,e.toDisplayString(t.$t("role")),1)]),e.createElementVNode("div",wt,[e.createElementVNode("div",ht,[e.createVNode(u,{user:a.value,"onUpdate:user":l[1]||(l[1]=N=>a.value=N)},null,8,["user"])])])])])]),_:1})}}},re={__name:"SfAvailablePermissionForRoleTable",props:{role:{type:Object}},emits:["success"],setup(o,{emit:a}){const t=o,l=a;i.useQuasar();const{t:d}=T.useI18n();E.useRoute(),E.useRouter();const u=A(),b=B(),N=e.ref(!1),_=e.ref([]),v=e.ref([{name:"index",align:"center",label:"#",field:"index"},{name:"permission_group",align:"left",label:d("permission_group"),field:"permission_group",sortable:!0},{name:"permission_name",align:"left",label:d("permission_name"),field:"permission_name",sortable:!0},{name:"flg_system",align:"left",label:d("flg_system"),field:"flg_system"}]),p=e.ref([]);e.ref({}),e.ref(!1);const g=e.ref(t.role),f=e.ref({keyword:"",active:"ALL",role_id:g.value.role_id}),n=e.ref({sortBy:"permission_group",descending:!1,page:1,rowsPerPage:5,rowsNumber:0});async function c(C){var P,x;const{page:s,rowsPerPage:r,sortBy:w,descending:h}=C.pagination,m=C.filter;N.value=!0;const y=r==0?n.value.rowsNumber:r,S=(s-1)*r,U=Object.assign({},{limit:y,offset:S,order_by:w,order_by_type:h?"DESC":"ASC"},m);let D;(m==null?void 0:m.role_id)!=null&&(D=await u.call({param:U,apiName:"roleAndPermission/getAvailablePermissionListForRole",loading:!1,showErrorNotification:!0}),D.success&&(n.value.rowsNumber=D.data.total_rows,_.value.splice(0,_.value.length,...D.data.datalist))),N.value=!1,n.value.page=s,n.value.rowsPerPage=r,!((P=D==null?void 0:D.data)!=null&&P.total_rows)&&((x=D==null?void 0:D.data)==null?void 0:x.total_rows)==0&&(n.value.rowsPerPage=10),n.value.sortBy=w,n.value.descending=h}e.onMounted(()=>{q()});async function V(){let C=[];p.value.forEach(w=>{C.push(w.permission_id)});const s={role_id:g.value.role_id,permission_id_list:C};(await u.add({param:s,apiName:"roleAndPermission/addPermissionToRole"})).success&&(b.success("Success"),l("success"))}function q(){c({pagination:n.value,filter:f.value})}return(C,s)=>{const r=e.resolveComponent("q-btn"),w=e.resolveComponent("q-icon"),h=e.resolveComponent("q-input"),m=e.resolveComponent("q-td"),y=e.resolveComponent("q-table");return e.openBlock(),e.createBlock(y,{title:C.$t("permission_of_role"),bordered:"",rows:_.value,columns:v.value,"row-key":S=>S.permission_id,"wrap-cells":!0,pagination:n.value,"onUpdate:pagination":s[2]||(s[2]=S=>n.value=S),loading:N.value,filter:f.value,"virtual-scroll":"",separator:"horizontal",selection:"multiple",selected:p.value,"onUpdate:selected":s[3]||(s[3]=S=>p.value=S),onRequest:c},{"top-left":e.withCtx(()=>[e.createVNode(r,{label:C.$t("add"),size:"sm",color:"primary",onClick:s[0]||(s[0]=S=>V()),disabled:p.value.length==0},null,8,["label","disabled"])]),"top-right":e.withCtx(()=>[e.createVNode(h,{dense:"",outlined:"",debounce:"300",modelValue:f.value.keyword,"onUpdate:modelValue":s[1]||(s[1]=S=>f.value.keyword=S),placeholder:C.$t("keyword")},{append:e.withCtx(()=>[e.createVNode(w,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-index":e.withCtx(S=>[e.createVNode(m,{props:S},{default:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(S.rowIndex+1),1)]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","row-key","pagination","loading","filter","selected"])}}},ie={__name:"SfAvailableRoleForUserRoleTable",props:{user:{type:Object}},emits:["success"],setup(o,{emit:a}){var C;const t=o,l=a;i.useQuasar();const{t:d}=T.useI18n();E.useRoute(),E.useRouter();const u=A(),b=B(),N=e.ref(!1),_=e.ref([]),v=e.ref([{name:"index",align:"center",label:"#",field:"index"},{name:"role_name",align:"left",label:d("role_name"),field:"role_name",sortable:!0},{name:"flg_system",align:"left",label:d("flg_system"),field:"flg_system"}]),p=e.ref([]),g=e.ref(t.user),f=e.ref({keyword:"",active:"ALL",user_id:(C=g.value)==null?void 0:C.user_id});e.ref({}),e.ref(!1);const n=e.ref({sortBy:"role_name",descending:!1,page:1,rowsPerPage:10,rowsNumber:0});async function c(s){var x,R;const{page:r,rowsPerPage:w,sortBy:h,descending:m}=s.pagination,y=s.filter;N.value=!0;const S=w==0?n.value.rowsNumber:w,k=(r-1)*w,D=Object.assign({},{limit:S,offset:k,order_by:h,order_by_type:m?"DESC":"ASC"},y);let P;(y==null?void 0:y.user_id)!=null&&(P=await u.call({param:D,apiName:"roleAndPermission/getAvailableRoleForUserRole",loading:!1,showErrorNotification:!0}),P.success&&(n.value.rowsNumber=P.data.total_rows,_.value.splice(0,_.value.length,...P.data.datalist))),N.value=!1,n.value.page=r,n.value.rowsPerPage=w,!((x=P==null?void 0:P.data)!=null&&x.total_rows)&&((R=P==null?void 0:P.data)==null?void 0:R.total_rows)==0&&(n.value.rowsPerPage=10),n.value.sortBy=h,n.value.descending=m}e.onMounted(()=>{q()});async function V(){let s=[];p.value.forEach(h=>{s.push(h.role_id)});const r={user_id:g.value.user_id,role_id_list:s};(await u.add({param:r,apiName:"roleAndPermission/addUserRole"})).success&&(b.success("Success"),l("success"))}function q(){c({pagination:n.value,filter:f.value})}return(s,r)=>{const w=e.resolveComponent("q-btn"),h=e.resolveComponent("q-icon"),m=e.resolveComponent("q-input"),y=e.resolveComponent("q-td"),S=e.resolveComponent("q-table");return e.openBlock(),e.createBlock(S,{title:s.$t("role"),bordered:"",rows:_.value,columns:v.value,"row-key":k=>k.role_id,"wrap-cells":!0,pagination:n.value,"onUpdate:pagination":r[2]||(r[2]=k=>n.value=k),loading:N.value,filter:s.filterKeyword,"virtual-scroll":"",separator:"horizontal",selection:"multiple",selected:p.value,"onUpdate:selected":r[3]||(r[3]=k=>p.value=k),onRequest:c},{"top-left":e.withCtx(()=>[e.createVNode(w,{label:s.$t("add"),size:"sm",color:"primary",onClick:r[0]||(r[0]=k=>V()),disabled:p.value.length==0},null,8,["label","disabled"])]),"top-right":e.withCtx(()=>[e.createVNode(m,{dense:"",outlined:"",debounce:"300",modelValue:s.filterKeyword,"onUpdate:modelValue":r[1]||(r[1]=k=>s.filterKeyword=k),placeholder:s.$t("keyword")},{append:e.withCtx(()=>[e.createVNode(h,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-index":e.withCtx(k=>[e.createVNode(y,{props:k},{default:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(k.rowIndex+1),1)]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","row-key","pagination","loading","filter","selected"])}}},ce={__name:"SfPermissionOfRoleTable",props:{role:{type:Object}},emits:["onSuccess"],setup(o,{expose:a,emit:t}){var h;const l=o,d=i.useQuasar(),{t:u}=T.useI18n(),b=e.ref(!1),N=e.ref([]);e.ref([]),E.useRoute(),E.useRouter();const _=A(),v=B(),p=e.ref([{name:"index",align:"center",label:"#",field:"index"},{name:"permission_group",align:"left",label:u("permission_group"),field:"permission_group"},{name:"permission_name",align:"left",label:u("permission_name"),field:"permission_name"},{name:"action",align:"center",label:u("action"),field:"action",sortable:!1}]),g=e.ref({role_id:(h=l.role)==null?void 0:h.role_id,keyword:"",active:"ALL"}),f=e.ref({});e.ref(!1);const n=e.ref(!1),c=e.ref(l.role);e.ref({height:d.screen.height*.6+"px",width:d.screen.width*.6+"px"});const V=e.ref({sortBy:"permission_group",descending:!1,page:1,rowsPerPage:10,rowsNumber:0});async function q(m){var $,pe;const{page:y,rowsPerPage:S,sortBy:k,descending:U}=m.pagination,D=m.filter;b.value=!0;const P=S==0?V.value.rowsNumber:S,x=(y-1)*S,O=Object.assign({},{limit:P,offset:x,order_by:k,order_by_type:U?"DESC":"ASC"},D);let L;(D==null?void 0:D.role_id)!=null&&(L=await _.call({param:O,apiName:"roleAndPermission/getPermissionOfRoleList",loading:!1,showErrorNotification:!0}),L.success&&(V.value.rowsNumber=L.data.total_rows,N.value.splice(0,N.value.length,...L.data.datalist))),b.value=!1,V.value.page=y,V.value.rowsPerPage=S,!(($=L==null?void 0:L.data)!=null&&$.total_rows)&&((pe=L==null?void 0:L.data)==null?void 0:pe.total_rows)==0&&(V.value.rowsPerPage=10),V.value.sortBy=k,V.value.descending=U}async function C(){(await _.delete({param:{id:f.value.id},apiName:"roleAndPermission/deletePermissionOfRole"})).success&&(v.success("Success"),n.value=!1,w())}function s(m){f.value=m;let y=Object.assign({},m);delete y.id,delete y.role_name;const S=d.dialog({component:"SfYesNoDlg",componentProps:{msg:u("are_you_sure_delete_this_data"),data:y}}).onOk(()=>{C(),S.hide()})}function r(){const m=d.dialog({component:"SfAvailablePermissionForRoleDlg",componentProps:{role:c}}).onOk(()=>{m.hide(),w()})}e.onMounted(()=>{w()}),e.watch(()=>l.role,(m,y)=>{var S;c.value=m,g.value.role_id=(S=c.value)==null?void 0:S.role_id,w()});function w(){q({pagination:V.value,filter:g.value})}return a({refresh:w}),(m,y)=>{const S=e.resolveComponent("q-btn"),k=e.resolveComponent("q-icon"),U=e.resolveComponent("q-input"),D=e.resolveComponent("q-td"),P=e.resolveComponent("q-table");return e.openBlock(),e.createBlock(P,{title:m.$t("permission_of_role"),bordered:"",rows:N.value,columns:p.value,"row-key":x=>x.id,"wrap-cells":!0,pagination:V.value,"onUpdate:pagination":y[2]||(y[2]=x=>V.value=x),loading:b.value,filter:g.value,"virtual-scroll":"",separator:"horizontal",onRequest:q},{"top-left":e.withCtx(()=>[e.createVNode(S,{label:m.$t("add"),size:"sm",color:"primary",onClick:y[0]||(y[0]=x=>r()),disabled:!c.value.role_id},null,8,["label","disabled"])]),"top-right":e.withCtx(()=>[e.createVNode(U,{dense:"",outlined:"",debounce:"300",modelValue:g.value.keyword,"onUpdate:modelValue":y[1]||(y[1]=x=>g.value.keyword=x),placeholder:m.$t("keyword")},{append:e.withCtx(()=>[e.createVNode(k,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-index":e.withCtx(x=>[e.createVNode(D,{props:x},{default:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(x.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":e.withCtx(x=>[e.createVNode(D,{props:x},{default:e.withCtx(()=>[e.createVNode(S,{label:m.$t("delete"),size:"sm",color:"negative",onClick:R=>s(x.row)},null,8,["label","onClick"])]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","row-key","pagination","loading","filter"])}}},de={__name:"SfRoleTable",props:{selected:{type:Object}},emits:["onSuccess","update:selected"],setup(o,{expose:a,emit:t}){const l=t,d=i.useQuasar(),{t:u}=T.useI18n();E.useRoute(),E.useRouter();const b=A(),N=B(),_=e.ref(!1),v=e.ref([]),p=e.ref([{name:"index",align:"center",label:"#",field:"index"},{name:"role_name",align:"left",label:u("role_name"),field:"role_name"},{name:"flg_system",align:"left",label:u("flg_system"),field:"flg_system"},{name:"active",align:"left",label:u("active"),field:"active"},{name:"action",align:"center",label:"ACTION",field:"action",sortable:!1}]),g=e.ref([]),f=e.ref({keyword:"",active:"ALL"}),n=e.ref({});e.ref(!1);const c=e.ref(!1);e.ref();const V=e.ref({sortBy:"role_name",descending:!1,page:1,rowsPerPage:10,rowsNumber:0});async function q(h){var L,$;const{page:m,rowsPerPage:y,sortBy:S,descending:k}=h.pagination,U=h.filter;_.value=!0;const D=y==0?V.value.rowsNumber:y,P=(m-1)*y,R=Object.assign({},{limit:D,offset:P,order_by:S,order_by_type:k?"DESC":"ASC"},U),O=await b.call({param:R,apiName:"roleAndPermission/getRoleList",loading:!1,showErrorNotification:!0});O.success&&(V.value.rowsNumber=O.data.total_rows,v.value.splice(0,v.value.length,...O.data.datalist)),_.value=!1,V.value.page=m,V.value.rowsPerPage=y,!((L=O==null?void 0:O.data)!=null&&L.total_rows)&&(($=O==null?void 0:O.data)==null?void 0:$.total_rows)==0&&(V.value.rowsPerPage=10),V.value.sortBy=S,V.value.descending=k}async function C(){(await b.delete({param:{role_id:n.value.role_id},apiName:"roleAndPermission/deleteRole"})).success&&(c.value=!1,N.success("Success"),w())}function s(){d.dialog({component:"SfAddRoleDlg",componentProps:{msg:u("are_you_sure_delete_this_data"),data:n.value}}).onOk(()=>w())}function r(h){n.value=h;let m=Object.assign({},h);delete m.role_id;const y=d.dialog({component:"SfYesNoDlg",componentProps:{msg:u("are_you_sure_delete_this_data"),data:m}}).onOk(()=>{C(),y.hide()})}e.watch(()=>g.value,(h,m)=>{l("update:selected",h[0]==null?{}:h[0])}),e.onMounted(()=>{w()});function w(){q({pagination:V.value,filter:f.value})}return a({refresh:w}),(h,m)=>{const y=e.resolveComponent("q-btn"),S=e.resolveComponent("q-icon"),k=e.resolveComponent("q-input"),U=e.resolveComponent("q-td"),D=e.resolveComponent("q-table");return e.openBlock(),e.createBlock(D,{title:h.$t("role"),bordered:"",rows:v.value,columns:p.value,"row-key":P=>P.role_id,"wrap-cells":!0,pagination:V.value,"onUpdate:pagination":m[2]||(m[2]=P=>V.value=P),loading:_.value,filter:f.value,"virtual-scroll":"",separator:"horizontal",selection:"single",selected:g.value,"onUpdate:selected":m[3]||(m[3]=P=>g.value=P),onRequest:q},{"top-left":e.withCtx(()=>[e.createVNode(y,{label:h.$t("add"),size:"sm",color:"primary",onClick:m[0]||(m[0]=P=>s())},null,8,["label"])]),"top-right":e.withCtx(()=>[e.createVNode(k,{dense:"",outlined:"",debounce:"300",modelValue:f.value.keyword,"onUpdate:modelValue":m[1]||(m[1]=P=>f.value.keyword=P),placeholder:h.$t("keyword")},{append:e.withCtx(()=>[e.createVNode(S,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-index":e.withCtx(P=>[e.createVNode(U,{props:P},{default:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(P.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":e.withCtx(P=>[e.createVNode(U,{props:P},{default:e.withCtx(()=>[e.createVNode(y,{label:h.$t("delete"),size:"sm",color:"negative",onClick:x=>r(P.row)},null,8,["label","onClick"])]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","row-key","pagination","loading","filter","selected"])}}},ue={__name:"SfUserRoleTable",props:{user:{type:Object}},emits:["onSuccess","update:selected"],setup(o,{emit:a}){var r;const t=o,l=i.useQuasar(),{t:d}=T.useI18n(),u=e.ref(!1),b=e.ref([]);E.useRoute(),E.useRouter();const N=A(),_=B(),v=e.ref([{name:"index",align:"center",label:"#",field:"index"},{name:"role_name",align:"left",label:d("role_name"),field:"role_name"},{name:"action",align:"center",label:d("action"),field:"action",sortable:!1}]),p=e.ref(t.user);e.ref([]);const g=e.ref({keyword:"",active:"ALL",user_id:(r=p.value)==null?void 0:r.user_id}),f=e.ref({});e.ref(!1),e.ref(!1),e.ref({height:l.screen.height*.6+"px",width:l.screen.width*.6+"px"});const n=e.ref({sortBy:"role_name",descending:!1,page:1,rowsPerPage:10,rowsNumber:0});async function c(w){var O,L;const{page:h,rowsPerPage:m,sortBy:y,descending:S}=w.pagination,k=w.filter;u.value=!0;const U=m==0?n.value.rowsNumber:m,D=(h-1)*m,x=Object.assign({},{limit:U,offset:D,order_by:y,order_by_type:S?"DESC":"ASC"},k);let R;(k==null?void 0:k.user_id)!=null&&(R=await N.call({param:x,apiName:"roleAndPermission/getUserRoleList",loading:!1,showErrorNotification:!0}),R.success&&(n.value.rowsNumber=R.data.total_rows,b.value.splice(0,b.value.length,...R.data.datalist))),u.value=!1,n.value.page=h,n.value.rowsPerPage=m,!((O=R==null?void 0:R.data)!=null&&O.total_rows)&&((L=R==null?void 0:R.data)==null?void 0:L.total_rows)==0&&(n.value.rowsPerPage=10),n.value.sortBy=y,n.value.descending=S}async function V(){const w=await N.delete({param:{user_role_id:f.value.user_role_id},apiName:"roleAndPermission/deleteUserRole"});return w.success&&(_.success("Success"),s()),w==null?void 0:w.success}function q(w){f.value=w;let h={role_name:w.role_name};const m=l.dialog({component:"SfYesNoDlg",componentProps:{msg:d("are_you_sure_delete_this_data"),data:h}}).onOk(async()=>{await V()&&m.hide()})}function C(){const w=l.dialog({component:"SfAvailableRoleForUserRoleDlg",componentProps:{user:p}}).onOk(async()=>{w.hide(),s()})}e.onMounted(()=>{s()}),e.watch(()=>t.user,(w,h)=>{p.value=w,g.value.user_id=w==null?void 0:w.user_id,s()});function s(){c({pagination:n.value,filter:g.value})}return(w,h)=>{const m=e.resolveComponent("q-btn"),y=e.resolveComponent("q-icon"),S=e.resolveComponent("q-input"),k=e.resolveComponent("q-td"),U=e.resolveComponent("q-table");return e.openBlock(),e.createBlock(U,{title:w.$t("user_role"),bordered:"",rows:b.value,columns:v.value,"row-key":D=>D.id,"wrap-cells":!0,pagination:n.value,"onUpdate:pagination":h[2]||(h[2]=D=>n.value=D),loading:u.value,filter:g.value,"virtual-scroll":"",separator:"horizontal",onRequest:c},{"top-left":e.withCtx(()=>{var D;return[e.createVNode(m,{label:w.$t("add"),size:"sm",color:"primary",onClick:h[0]||(h[0]=P=>C()),disabled:!((D=p.value)!=null&&D.user_id)},null,8,["label","disabled"])]}),"top-right":e.withCtx(()=>[e.createVNode(S,{dense:"",outlined:"",debounce:"300",modelValue:g.value.keyword,"onUpdate:modelValue":h[1]||(h[1]=D=>g.value.keyword=D),placeholder:w.$t("keyword")},{append:e.withCtx(()=>[e.createVNode(y,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"body-cell-index":e.withCtx(D=>[e.createVNode(k,{props:D},{default:e.withCtx(()=>[e.createElementVNode("div",null,e.toDisplayString(D.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":e.withCtx(D=>[e.createVNode(k,{props:D},{default:e.withCtx(()=>[e.createVNode(m,{label:w.$t("delete"),size:"sm",color:"negative",onClick:P=>q(D.row)},null,8,["label","onClick"])]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","row-key","pagination","loading","filter"])}}},bt={class:"text-h6"},yt={class:"row"},Vt={class:"col text-subtitle1"},Nt={key:0,class:"row q-pa-sm"},Ct={class:"col"},me={__name:"SfYesNoDlg",props:{msg:{type:String,required:!0},data:{type:Object||Array||String,required:!1}},emits:[...i.useDialogPluginComponent.emits],setup(o,{emit:a}){const t=o,l=a,{dialogRef:d,onDialogHide:u,onDialogOK:b,onDialogCancel:N}=i.useDialogPluginComponent(),{t:_}=T.useI18n(),v=e.ref([]),p=e.ref([]),g=e.ref(t.msg);if(typeof t.data=="object"&&t.data!==null){v.value=[],p.value=[];for(var f of Object.keys(t.data))v.value.push({name:f,align:"left",label:_(f),field:f});v.value.reverse(),p.value.push(t.data),p.value.reverse()}if(Array.isArray(t.data)&&t.data.length>0){v.value=[],p.value=[];for(var f of Object.keys(t.data[0]))v.value.push({name:f,align:"left",label:_(f),field:f});t.data.forEach(function(c,V){p.value.push(c)})}(typeof t.data=="string"||t.data instanceof String)&&(v.value=[],p.value=[],v.value.push({name:"data",align:"left",label:_("data"),field:"data"}),p.value.push({data:t.data}),v.value.reverse(),p.value.reverse());function n(){l("ok")}return(c,V)=>{const q=e.resolveComponent("q-space"),C=e.resolveComponent("q-btn"),s=e.resolveComponent("q-card-section"),r=e.resolveComponent("q-separator"),w=e.resolveComponent("q-td"),h=e.resolveComponent("q-tr"),m=e.resolveComponent("q-table"),y=e.resolveComponent("q-card-actions"),S=e.resolveComponent("q-card"),k=e.resolveComponent("q-dialog"),U=e.resolveDirective("close-popup");return e.openBlock(),e.createBlock(k,{ref_key:"dialogRef",ref:d,onHide:e.unref(u)},{default:e.withCtx(()=>[e.createVNode(S,null,{default:e.withCtx(()=>[e.createVNode(s,{class:"row items-center q-pb-none"},{default:e.withCtx(()=>[e.createElementVNode("div",bt,e.toDisplayString(c.$t("confirmation")),1),e.createVNode(q),e.withDirectives(e.createVNode(C,{icon:"close",flat:"",round:"",dense:""},null,512),[[U]])]),_:1}),e.createVNode(r),e.createVNode(s,{class:"q-pt-xm"},{default:e.withCtx(()=>[e.createElementVNode("div",yt,[e.createElementVNode("div",Vt,e.toDisplayString(g.value),1)]),v.value.length>0?(e.openBlock(),e.createElementBlock("div",Nt,[e.createElementVNode("div",Ct,[e.createVNode(m,{rows:p.value,columns:v.value,dense:"","hide-pagination":"","wrap-cells":"",flat:"",bordered:""},{body:e.withCtx(D=>[e.createVNode(h,{props:D,"no-hover":""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(D.cols,P=>(e.openBlock(),e.createBlock(w,{props:D,key:P.field},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(D.row[P.field]),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(y,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(C,{label:c.$t("no"),color:"warning"},null,8,["label"]),[[U]]),e.createVNode(C,{label:c.$t("yes"),color:"primary",onClick:n},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["onHide"])}}},Se="1";function Pe(o){o.component("SfDatePicker",j),o.component("SfDateTimePicker",H),o.component("SfMonthPicker",Q),o.component("SfTimePicker",z),o.component("SfAddUserDlg",K),o.component("SfEditUserDlg",G),o.component("SfEditUserForAdminDlg",J),o.component("SfUserPage",W),o.component("SfUserTable",X),o.component("SfUserForUserRoleTable",Z),o.component("SfAvailableRoleListCombo",ee),o.component("SfAddRoleDlg",oe),o.component("SfAvailablePermissionForRoleDlg",te),o.component("SfAvailableRoleForUserRoleDlg",ae),o.component("SfChangeRoleDlg",le),o.component("SfRolePage",ne),o.component("SfUserVsRolePage",se),o.component("SfAvailablePermissionForRoleTable",re),o.component("SfAvailableRoleForUserRoleTable",ie),o.component("SfPermissionOfRoleTable",ce),o.component("SfRoleTable",de),o.component("SfUserRoleTable",ue),o.component("SfYesNoDlg",me)}const qt=Object.freeze(Object.defineProperty({__proto__:null,SfAddRoleDlg:oe,SfAddUserDlg:K,SfAvailablePermissionForRoleDlg:te,SfAvailablePermissionForRoleTable:re,SfAvailableRoleForUserRoleDlg:ae,SfAvailableRoleForUserRoleTable:ie,SfAvailableRoleListCombo:ee,SfChangeRoleDlg:le,SfDatePicker:j,SfDateTimePicker:H,SfEditUserDlg:G,SfEditUserForAdminDlg:J,SfMonthPicker:Q,SfPermissionOfRoleTable:ce,SfRolePage:ne,SfRoleTable:de,SfTimePicker:z,SfUserForUserRoleTable:Z,SfUserPage:W,SfUserRoleTable:ue,SfUserTable:X,SfUserVsRolePage:se,SfYesNoDlg:me,authStore:be,dateNow:ge,datetimeNow:ve,displayDate:Y,displayDatetime:F,displayIDR:Ve,enUS:Ce,firstDayOfThisMonth:we,formatDatetime:fe,idID:qe,install:Pe,lastDayOfThisMonth:he,notificationStore:B,permit:Ne,roleAndPermissionStore:ye,sfapiStore:A,strToDate:_e,userDataStore:I,version:Se},Symbol.toStringTag,{value:"Module"}));exports.SfAddRoleDlg=oe;exports.SfAddUserDlg=K;exports.SfAvailablePermissionForRoleDlg=te;exports.SfAvailablePermissionForRoleTable=re;exports.SfAvailableRoleForUserRoleDlg=ae;exports.SfAvailableRoleForUserRoleTable=ie;exports.SfAvailableRoleListCombo=ee;exports.SfChangeRoleDlg=le;exports.SfDatePicker=j;exports.SfDateTimePicker=H;exports.SfEditUserDlg=G;exports.SfEditUserForAdminDlg=J;exports.SfMonthPicker=Q;exports.SfPermissionOfRoleTable=ce;exports.SfRolePage=ne;exports.SfRoleTable=de;exports.SfTimePicker=z;exports.SfUserForUserRoleTable=Z;exports.SfUserPage=W;exports.SfUserRoleTable=ue;exports.SfUserTable=X;exports.SfUserVsRolePage=se;exports.SfYesNoDlg=me;exports.authStore=be;exports.dateNow=ge;exports.datetimeNow=ve;exports.default=qt;exports.displayDate=Y;exports.displayDatetime=F;exports.displayIDR=Ve;exports.enUS=Ce;exports.firstDayOfThisMonth=we;exports.formatDatetime=fe;exports.idID=qe;exports.install=Pe;exports.lastDayOfThisMonth=he;exports.notificationStore=B;exports.permit=Ne;exports.roleAndPermissionStore=ye;exports.sfapiStore=A;exports.strToDate=_e;exports.userDataStore=I;exports.version=Se;
